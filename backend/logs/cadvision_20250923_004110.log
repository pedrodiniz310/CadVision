2025-09-23 00:41:14 - root - INFO - [logging_config.py:51] - Logging configurado. Arquivo: C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\logs\cadvision_20250923_004110.log
2025-09-23 00:41:14 - app - INFO - [logging_config.py:68] - EVENT: startup - DATA: {'timestamp': '2025-09-23T00:41:14.435867', 'service': 'app', 'event': 'startup', 'data': {'version': '1.1.0'}}
2025-09-23 00:41:14 - app.database - INFO - [database.py:175] - Banco de dados inicializado com sucesso (com novo schema).
2025-09-23 00:41:14 - app - INFO - [logging_config.py:68] - EVENT: database_initialized - DATA: {'timestamp': '2025-09-23T00:41:14.439885', 'service': 'app', 'event': 'database_initialized', 'data': {}}
2025-09-23 00:41:33 - vision/identify - INFO - [logging_config.py:68] - EVENT: process_started - DATA: {'timestamp': '2025-09-23T00:41:33.907729', 'service': 'vision/identify', 'event': 'process_started', 'data': {'vertical': 'vestuario', 'tag_image': 'Imagem do WhatsApp de 2025-09-21 à(s) 16.46.16_17ae13c9.jpg', 'product_image': 'Imagem do WhatsApp de 2025-09-22 à(s) 18.59.39_a2b1167e.jpg'}}
2025-09-23 00:41:33 - vision/identify - INFO - [logging_config.py:68] - EVENT: text_extraction_start - DATA: {'timestamp': '2025-09-23T00:41:33.908732', 'service': 'vision/identify', 'event': 'text_extraction_start', 'data': {'hash': 'b2fc004d6c9b4e068ae9234462176855'}}
2025-09-23 00:41:33 - app.services.vision_service - INFO - [vision_service.py:109] - Imagem aprimorada para OCR.
2025-09-23 00:41:36 - app.services.vision_service - INFO - [vision_service.py:182] - Vision API: Texto extraído (156 chars), Logos: 0, Labels: 0
2025-09-23 00:41:36 - app.services.vision_service - INFO - [vision_service.py:277] - Texto bruto: '100% ALGODÃO
DECOTE: 98% ALGODÃO
2% ELASTANO
FORNECEDOR: 84891
Modelo: 1059827 - T. 20
40
P W
P
日
Cor VERDE CLARO
000000113667090314
SKU: 11366709
PO:288843' -> Texto limpo para análise: '100982848911059827204000000011366709031411366709288843'
2025-09-23 00:41:36 - app.services.vision_service - WARNING - [vision_service.py:298] - Nenhum GTIN válido encontrado no texto limpo: '100982848911059827204000000011366709031411366709288843'
2025-09-23 00:41:36 - vision/identify - INFO - [logging_config.py:68] - EVENT: intelligent_analysis_start - DATA: {'timestamp': '2025-09-23T00:41:36.799719', 'service': 'vision/identify', 'event': 'intelligent_analysis_start', 'data': {'vertical': 'vestuario'}}
2025-09-23 00:41:36 - app.services.product_service - INFO - [product_service.py:89] - Iniciando Etapa 1 (Vertex AI Vector Search).
2025-09-23 00:41:36 - app.services.vector_search_service - INFO - [vector_search_service.py:48] - Gerando embedding via API REST...
2025-09-23 00:41:40 - app.services.vector_search_service - INFO - [vector_search_service.py:54] - Vetor (embedding) da imagem gerado com sucesso via API REST.
2025-09-23 00:41:40 - app.services.vector_search_service - INFO - [vector_search_service.py:105] - Consultando a Vector Search no endpoint público: 52434059.southamerica-east1-992285647932.vdb.vertexai.goog...
2025-09-23 00:41:41 - app.services.vector_search_service - INFO - [vector_search_service.py:116] - Nenhuma correspondência encontrada na Vector Search.
2025-09-23 00:41:41 - app.services.product_service - INFO - [product_service.py:112] - Busca visual falhou ou não aplicável. Prosseguindo com a análise de texto/GTIN.
2025-09-23 00:41:41 - app.services.product_service - INFO - [product_service.py:126] - Via Rápida falhou ou não aplicável. Iniciando Etapa 3 (Inferência da IA).
2025-09-23 00:41:45 - ai_service - INFO - [logging_config.py:68] - EVENT: json_parsed_successfully - DATA: {'timestamp': '2025-09-23T00:41:45.269972', 'service': 'ai_service', 'event': 'json_parsed_successfully', 'data': {'title_extracted': 'Blusa Manga Curta', 'brand_extracted': None, 'category_extracted': 'Blusas'}}
2025-09-23 00:41:45 - app.services.advanced_inference_service - WARNING - [advanced_inference_service.py:41] - IA retornou um GTIN inválido ('000000113667090314'). Descartando o valor.
2025-09-23 00:41:45 - app.services.product_service - INFO - [product_service.py:137] - Produto pré-identificado: Blusa Manga Curta
2025-09-23 00:41:45 - app.services.product_service - INFO - [product_service.py:141] - Iniciando Etapa de Enriquecimento com Busca na Web (RAG).
2025-09-23 00:43:15 - app.database - INFO - [database.py:196] - Tentativa de inserir produto com dados: {'vertical': 'supermercado', 'confidence': 0.95, 'image_hash': '36fe6f03a4e51f4499637385aa1b3770', 'sku': '11366709', 'title': 'Camisa manga curta tamanho P', 'brand': 'Polo', 'gtin': None, 'department': 'Masculino', 'category': 'Outros', 'subcategory': 'Camisetas de algodão', 'ncm': None, 'cest': None, 'price': None}
2025-09-23 00:43:15 - app.database - INFO - [database.py:234] - Produto ID 2 (Vertical: supermercado) salvo com sucesso.
2025-09-23 00:43:33 - vision/identify - INFO - [logging_config.py:68] - EVENT: process_started - DATA: {'timestamp': '2025-09-23T00:43:33.434479', 'service': 'vision/identify', 'event': 'process_started', 'data': {'vertical': 'vestuario', 'tag_image': 'Imagem do WhatsApp de 2025-09-21 à(s) 16.46.16_17ae13c9.jpg', 'product_image': 'Imagem do WhatsApp de 2025-09-22 à(s) 18.59.39_a2b1167e.jpg'}}
2025-09-23 00:43:33 - vision/identify - INFO - [logging_config.py:68] - EVENT: text_extraction_start - DATA: {'timestamp': '2025-09-23T00:43:33.435480', 'service': 'vision/identify', 'event': 'text_extraction_start', 'data': {'hash': 'b2fc004d6c9b4e068ae9234462176855'}}
2025-09-23 00:43:33 - app.services.vision_service - INFO - [vision_service.py:109] - Imagem aprimorada para OCR.
2025-09-23 00:43:36 - app.services.vision_service - INFO - [vision_service.py:182] - Vision API: Texto extraído (156 chars), Logos: 0, Labels: 0
2025-09-23 00:43:36 - app.services.vision_service - INFO - [vision_service.py:277] - Texto bruto: '100% ALGODÃO
DECOTE: 98% ALGODÃO
2% ELASTANO
FORNECEDOR: 84891
Modelo: 1059827 - T. 20
40
P W
P
日
Cor VERDE CLARO
000000113667090314
SKU: 11366709
PO:288843' -> Texto limpo para análise: '100982848911059827204000000011366709031411366709288843'
2025-09-23 00:43:36 - app.services.vision_service - WARNING - [vision_service.py:298] - Nenhum GTIN válido encontrado no texto limpo: '100982848911059827204000000011366709031411366709288843'
2025-09-23 00:43:36 - vision/identify - INFO - [logging_config.py:68] - EVENT: intelligent_analysis_start - DATA: {'timestamp': '2025-09-23T00:43:36.968045', 'service': 'vision/identify', 'event': 'intelligent_analysis_start', 'data': {'vertical': 'vestuario'}}
2025-09-23 00:43:36 - app.services.product_service - INFO - [product_service.py:89] - Iniciando Etapa 1 (Vertex AI Vector Search).
2025-09-23 00:43:36 - app.services.vector_search_service - INFO - [vector_search_service.py:48] - Gerando embedding via API REST...
2025-09-23 00:43:40 - app.services.vector_search_service - INFO - [vector_search_service.py:54] - Vetor (embedding) da imagem gerado com sucesso via API REST.
2025-09-23 00:43:40 - app.services.vector_search_service - INFO - [vector_search_service.py:105] - Consultando a Vector Search no endpoint público: 52434059.southamerica-east1-992285647932.vdb.vertexai.goog...
2025-09-23 00:43:41 - app.services.vector_search_service - INFO - [vector_search_service.py:116] - Nenhuma correspondência encontrada na Vector Search.
2025-09-23 00:43:41 - app.services.product_service - INFO - [product_service.py:112] - Busca visual falhou ou não aplicável. Prosseguindo com a análise de texto/GTIN.
2025-09-23 00:43:41 - app.services.product_service - INFO - [product_service.py:126] - Via Rápida falhou ou não aplicável. Iniciando Etapa 3 (Inferência da IA).
2025-09-23 00:43:43 - ai_service - INFO - [logging_config.py:68] - EVENT: json_parsed_successfully - DATA: {'timestamp': '2025-09-23T00:43:43.791182', 'service': 'ai_service', 'event': 'json_parsed_successfully', 'data': {'title_extracted': 'Camiseta Gola V', 'brand_extracted': None, 'category_extracted': 'Camisetas'}}
2025-09-23 00:43:43 - app.services.advanced_inference_service - WARNING - [advanced_inference_service.py:41] - IA retornou um GTIN inválido ('000000113667090314'). Descartando o valor.
2025-09-23 00:43:43 - app.services.product_service - INFO - [product_service.py:137] - Produto pré-identificado: Camiseta Gola V
2025-09-23 00:43:43 - app.services.product_service - INFO - [product_service.py:141] - Iniciando Etapa de Enriquecimento com Busca na Web (RAG).
2025-09-23 00:53:16 - app - INFO - [logging_config.py:68] - EVENT: shutdown - DATA: {'timestamp': '2025-09-23T00:53:16.220339', 'service': 'app', 'event': 'shutdown', 'data': {}}
2025-09-23 00:53:16 - main - INFO - [main.py:48] - Encerrando aplicação CadVision API.
