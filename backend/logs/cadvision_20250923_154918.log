2025-09-23 15:49:22 - root - INFO - [logging_config.py:51] - Logging configurado. Arquivo: C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\logs\cadvision_20250923_154918.log
2025-09-23 15:49:22 - app - INFO - [logging_config.py:68] - EVENT: startup - DATA: {'timestamp': '2025-09-23T15:49:22.662070', 'service': 'app', 'event': 'startup', 'data': {'version': '1.1.0'}}
2025-09-23 15:49:22 - app.database - INFO - [database.py:175] - Banco de dados inicializado com sucesso (com novo schema).
2025-09-23 15:49:22 - app - INFO - [logging_config.py:68] - EVENT: database_initialized - DATA: {'timestamp': '2025-09-23T15:49:22.665086', 'service': 'app', 'event': 'database_initialized', 'data': {}}
2025-09-23 15:49:56 - vision/identify - INFO - [logging_config.py:68] - EVENT: process_started - DATA: {'timestamp': '2025-09-23T15:49:56.146341', 'service': 'vision/identify', 'event': 'process_started', 'data': {'vertical': 'supermercado', 'tag_image': 'arroz2.png', 'product_image': None}}
2025-09-23 15:49:56 - vision/identify - INFO - [logging_config.py:68] - EVENT: text_extraction_start - DATA: {'timestamp': '2025-09-23T15:49:56.147340', 'service': 'vision/identify', 'event': 'text_extraction_start', 'data': {'hash': '44a30420041f34c214d9152407d5491a'}}
2025-09-23 15:49:59 - app.services.vision_service - INFO - [vision_service.py:149] - Vision API: Texto extraído (238 chars), Logos: 0, Labels: 8
2025-09-23 15:49:59 - vision/identify - INFO - [logging_config.py:68] - EVENT: intelligent_analysis_start - DATA: {'timestamp': '2025-09-23T15:49:59.166857', 'service': 'vision/identify', 'event': 'intelligent_analysis_start', 'data': {'vertical': 'supermercado'}}
2025-09-23 15:49:59 - product_analysis - INFO - [logging_config.py:68] - EVENT: pipeline_started - DATA: {'timestamp': '2025-09-23T15:49:59.166857', 'service': 'product_analysis', 'event': 'pipeline_started', 'data': {'vertical': 'supermercado'}}
2025-09-23 15:49:59 - product_analysis - INFO - [logging_config.py:68] - EVENT: attempting_strategy - DATA: {'timestamp': '2025-09-23T15:49:59.167857', 'service': 'product_analysis', 'event': 'attempting_strategy', 'data': {'strategy': 'AI_INFERENCE'}}
2025-09-23 15:49:59 - advanced_inference - INFO - [logging_config.py:68] - EVENT: processing_started - DATA: {'timestamp': '2025-09-23T15:49:59.167857', 'service': 'advanced_inference', 'event': 'processing_started', 'data': {'vertical': 'supermercado'}}
2025-09-23 15:49:59 - main - ERROR - [main.py:142] - Erro na análise inteligente: '\n    "title"'
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 134, in identify_image
    product_info = product_service.intelligent_text_analysis(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\app\services\product_service.py", line 209, in intelligent_text_analysis
    return pipeline.analyze_product(vision_data, product_image_bytes, vertical)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\app\services\product_service.py", line 51, in analyze_product
    ai_result = self._execute_ai_strategy(vision_data, [], vertical)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\app\services\product_service.py", line 132, in _execute_ai_strategy
    return run_advanced_inference(vision_data, search_results, vertical)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\app\services\advanced_inference_service.py", line 144, in run_advanced_inference
    prompt = PROMPT_SUPERMERCADO_V2.format(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: '\n    "title"'
2025-09-23 15:51:56 - app - INFO - [logging_config.py:68] - EVENT: shutdown - DATA: {'timestamp': '2025-09-23T15:51:56.130080', 'service': 'app', 'event': 'shutdown', 'data': {}}
2025-09-23 15:51:56 - main - INFO - [main.py:48] - Encerrando aplicação CadVision API.
