2025-09-23 16:07:08 - root - INFO - [logging_config.py:51] - Logging configurado. Arquivo: C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\logs\cadvision_20250923_160704.log
2025-09-23 16:07:08 - app - INFO - [logging_config.py:68] - EVENT: startup - DATA: {'timestamp': '2025-09-23T16:07:08.484538', 'service': 'app', 'event': 'startup', 'data': {'version': '1.1.0'}}
2025-09-23 16:07:08 - app.database - INFO - [database.py:175] - Banco de dados inicializado com sucesso (com novo schema).
2025-09-23 16:07:08 - app - INFO - [logging_config.py:68] - EVENT: database_initialized - DATA: {'timestamp': '2025-09-23T16:07:08.489541', 'service': 'app', 'event': 'database_initialized', 'data': {}}
2025-09-23 16:07:41 - vision/identify - INFO - [logging_config.py:68] - EVENT: process_started - DATA: {'timestamp': '2025-09-23T16:07:41.362956', 'service': 'vision/identify', 'event': 'process_started', 'data': {'vertical': 'supermercado', 'tag_image': 'Imagem do WhatsApp de 2025-09-17 √†(s) 18.48.26_20d1bdb5.jpg', 'product_image': None}}
2025-09-23 16:07:41 - vision/identify - INFO - [logging_config.py:68] - EVENT: text_extraction_start - DATA: {'timestamp': '2025-09-23T16:07:41.362956', 'service': 'vision/identify', 'event': 'text_extraction_start', 'data': {'hash': 'e909fe0f6cb4c1043e03c0e2d2763f0d'}}
2025-09-23 16:07:43 - app.services.vision_service - INFO - [vision_service.py:149] - Vision API: Texto extra√≠do (15 chars), Logos: 0, Labels: 5
2025-09-23 16:07:43 - vision/identify - INFO - [logging_config.py:68] - EVENT: intelligent_analysis_start - DATA: {'timestamp': '2025-09-23T16:07:43.889402', 'service': 'vision/identify', 'event': 'intelligent_analysis_start', 'data': {'vertical': 'supermercado'}}
2025-09-23 16:07:43 - product_analysis - INFO - [logging_config.py:68] - EVENT: pipeline_started - DATA: {'timestamp': '2025-09-23T16:07:43.890401', 'service': 'product_analysis', 'event': 'pipeline_started', 'data': {'vertical': 'supermercado'}}
2025-09-23 16:07:43 - product_analysis - INFO - [logging_config.py:68] - EVENT: attempting_strategy - DATA: {'timestamp': '2025-09-23T16:07:43.890401', 'service': 'product_analysis', 'event': 'attempting_strategy', 'data': {'strategy': 'AI_INFERENCE'}}
2025-09-23 16:07:43 - advanced_inference - INFO - [logging_config.py:68] - EVENT: processing_started - DATA: {'timestamp': '2025-09-23T16:07:43.890401', 'service': 'advanced_inference', 'event': 'processing_started', 'data': {'vertical': 'supermercado'}}
2025-09-23 16:07:43 - app.services.advanced_inference_service - INFO - [advanced_inference_service.py:38] - Inicializando o modelo GenerativeModel (gemini-1.5-pro-latest)...
2025-09-23 16:07:43 - app.services.advanced_inference_service - INFO - [advanced_inference_service.py:41] - Modelo GenerativeModel inicializado com sucesso.
2025-09-23 16:07:45 - advanced_inference - INFO - [logging_config.py:68] - EVENT: processing_completed - DATA: {'timestamp': '2025-09-23T16:07:45.609247', 'service': 'advanced_inference', 'event': 'processing_completed', 'data': {'title': 'Produto N√£o Identificado', 'gtin': '7891340365576', 'processing_time': 1.72}}
2025-09-23 16:07:45 - product_analysis - INFO - [logging_config.py:68] - EVENT: attempting_strategy - DATA: {'timestamp': '2025-09-23T16:07:45.609247', 'service': 'product_analysis', 'event': 'attempting_strategy', 'data': {'strategy': 'GTIN_LOOKUP'}}
2025-09-23 16:07:47 - app.services.cosmos_service - INFO - [cosmos_service.py:72] - üì¶ Dados formatados do Cosmos: {'gtin': '7891340365576', 'title': 'BISC LOOK WAFER 55G BRIGADEIRO', 'brand': '', 'category': 'Biscoito Wafer', 'ncm': '19053200', 'cest': '', 'confidence': 0.99, 'vertical': 'supermercado'}
2025-09-23 16:07:47 - main - ERROR - [main.py:142] - Erro na an√°lise inteligente: 'ProductAnalysisPipeline' object has no attribute '_is_result_sufficient'
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 134, in identify_image
    product_info = product_service.intelligent_text_analysis(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\app\services\product_service.py", line 263, in intelligent_text_analysis
    return pipeline.analyze_product(vision_data, product_image_bytes, vertical)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\app\services\product_service.py", line 122, in analyze_product
    if self._is_result_sufficient(cosmos_result):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ProductAnalysisPipeline' object has no attribute '_is_result_sufficient'
2025-09-23 16:11:40 - app - INFO - [logging_config.py:68] - EVENT: shutdown - DATA: {'timestamp': '2025-09-23T16:11:40.743688', 'service': 'app', 'event': 'shutdown', 'data': {}}
2025-09-23 16:11:40 - main - INFO - [main.py:48] - Encerrando aplica√ß√£o CadVision API.
