2025-09-18 16:38:36,148 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 16:39:23,928 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 16:41:41,920 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 16:46:55,667 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 16:48:36,240 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 16:51:23,091 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 16:51:42,639 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 17:02:03,498 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 17:02:29,855 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 17:03:24,244 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 17:03:26,696 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-18 17:03:26,698 - app.services.vision_service - ERROR - Erro durante a extração de dados do Vision: global flags not at the start of the expression at position 19
2025-09-18 17:03:26,698 - main - INFO - Dados extraídos - Texto: 0 chars, Logos: [], Sucesso: False, Tempo: 2.52s
2025-09-18 17:13:06,245 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 17:17:04,605 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 17:18:04,591 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 17:18:08,318 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-18 17:18:08,320 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 3.79s
2025-09-18 17:18:08,320 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-18 17:18:08,320 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '', 'title': 'Produto não identificado', 'brand': None, 'category': '', 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-18 17:18:08,321 - main - ERROR - Erro interno no processamento: 7 validation errors for IdentificationResult
product.gtin
  Value error, GTIN deve ter 8, 12, 13 ou 14 dígitos [type=value_error, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
product.category
  Input should be 'Alimentos', 'Bebidas', 'Limpeza', 'Higiene', 'Eletrônicos', 'Vestuário', 'Automotivo', 'Construção' or 'Outros' [type=enum, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/enum
product.ncm
  Value error, NCM deve estar no formato 9999.99.99 [type=value_error, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
product.cest
  Value error, CEST deve estar no formato 99.999.99 [type=value_error, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
product.id
  Field required [type=missing, input_value={'gtin': '', 'title': 'Pr...65576', 'success': True}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
product.created_at
  Field required [type=missing, input_value={'gtin': '', 'title': 'Pr...65576', 'success': True}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
product.updated_at
  Field required [type=missing, input_value={'gtin': '', 'title': 'Pr...65576', 'success': True}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 209, in identify_image
    return IdentificationResult(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 7 validation errors for IdentificationResult
product.gtin
  Value error, GTIN deve ter 8, 12, 13 ou 14 dígitos [type=value_error, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
product.category
  Input should be 'Alimentos', 'Bebidas', 'Limpeza', 'Higiene', 'Eletrônicos', 'Vestuário', 'Automotivo', 'Construção' or 'Outros' [type=enum, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/enum
product.ncm
  Value error, NCM deve estar no formato 9999.99.99 [type=value_error, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
product.cest
  Value error, CEST deve estar no formato 99.999.99 [type=value_error, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
product.id
  Field required [type=missing, input_value={'gtin': '', 'title': 'Pr...65576', 'success': True}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
product.created_at
  Field required [type=missing, input_value={'gtin': '', 'title': 'Pr...65576', 'success': True}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
product.updated_at
  Field required [type=missing, input_value={'gtin': '', 'title': 'Pr...65576', 'success': True}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-09-18 17:34:27,240 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 17:34:46,611 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 17:34:49,120 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-18 17:34:49,122 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 2.57s
2025-09-18 17:34:49,122 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-18 17:34:49,122 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '', 'title': 'Produto não identificado', 'brand': None, 'category': '', 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-18 17:34:49,123 - main - ERROR - Erro interno no processamento: name 'IdentifiedProduct' is not defined
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 164, in identify_image
    identified_product = IdentifiedProduct(
                         ^^^^^^^^^^^^^^^^^
NameError: name 'IdentifiedProduct' is not defined
2025-09-18 17:37:50,781 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 17:38:00,474 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 17:38:03,411 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-18 17:38:03,413 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 3.01s
2025-09-18 17:38:03,413 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-18 17:38:03,414 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '', 'title': 'Produto não identificado', 'brand': None, 'category': '', 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-18 17:38:03,414 - main - ERROR - Erro interno no processamento: 1 validation error for IdentifiedProduct
category
  Input should be 'Alimentos', 'Bebidas', 'Limpeza', 'Higiene', 'Eletrônicos', 'Vestuário', 'Automotivo', 'Construção' or 'Outros' [type=enum, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/enum
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 164, in identify_image
    identified_product = IdentifiedProduct(
                         ^^^^^^^^^^^^^^^^^^
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for IdentifiedProduct
category
  Input should be 'Alimentos', 'Bebidas', 'Limpeza', 'Higiene', 'Eletrônicos', 'Vestuário', 'Automotivo', 'Construção' or 'Outros' [type=enum, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/enum
2025-09-18 17:40:51,870 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 17:41:07,894 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 17:41:33,479 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 17:42:47,359 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 17:47:30,732 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 17:47:43,989 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 17:47:47,745 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-18 17:47:47,747 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 3.82s
2025-09-18 17:47:47,747 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-18 17:47:47,748 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '', 'title': 'Produto não identificado', 'brand': None, 'category': '', 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-18 17:47:47,748 - main - ERROR - Erro interno no processamento: 1 validation error for IdentifiedProduct
category
  Input should be 'Alimentos', 'Bebidas', 'Limpeza', 'Higiene', 'Eletrônicos', 'Vestuário', 'Automotivo', 'Construção' or 'Outros' [type=enum, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/enum
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 164, in identify_image
    identified_product = IdentifiedProduct(
                         ^^^^^^^^^^^^^^^^^^
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for IdentifiedProduct
category
  Input should be 'Alimentos', 'Bebidas', 'Limpeza', 'Higiene', 'Eletrônicos', 'Vestuário', 'Automotivo', 'Construção' or 'Outros' [type=enum, input_value='', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/enum
2025-09-18 17:55:44,694 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 18:02:35,509 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 18:04:34,166 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 18:05:51,917 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 18:06:24,808 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 18:06:59,956 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 18:07:04,472 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-18 18:07:04,474 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 4.58s
2025-09-18 18:07:04,474 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-18 18:07:04,475 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '', 'title': 'Produto não identificado', 'brand': None, 'category': None, 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-18 18:07:04,478 - app.database - ERROR - Erro durante operação no banco: UNIQUE constraint failed: processing_logs.image_hash
2025-09-18 18:07:04,478 - app.database - ERROR - Erro de banco de dados: UNIQUE constraint failed: processing_logs.image_hash
2025-09-18 18:07:04,478 - app.database - ERROR - Erro ao registrar log de processamento: UNIQUE constraint failed: processing_logs.image_hash
2025-09-18 18:13:24,904 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 18:14:04,255 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 18:16:51,261 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 18:16:54,404 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-18 18:16:54,406 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 3.20s
2025-09-18 18:16:54,406 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-18 18:16:54,407 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '', 'title': 'Produto não identificado', 'brand': None, 'category': None, 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-18 22:25:28,037 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 22:26:04,406 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 22:26:07,014 - app.services.vision_service - INFO - Vision API: Texto extraído (407 chars), Logos: 0, Labels: 6
2025-09-18 22:26:07,016 - main - INFO - Dados extraídos - Texto: 407 chars, Logos: [], Sucesso: True, Tempo: 2.70s
2025-09-18 22:26:07,017 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-18 22:26:07,017 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '', 'title': 'CONTIENE AROMATIZANTE SINTETICO IDENTICO AL NATURAL', 'brand': None, 'category': 'Alimentos', 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-18 22:47:33,193 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 23:14:05,674 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 23:14:26,439 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 23:14:29,857 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-18 23:14:29,859 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 3.48s
2025-09-18 23:14:29,860 - main - ERROR - Erro interno no processamento: intelligent_text_analysis() takes 3 positional arguments but 7 were given
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 162, in identify_image
    product_info = intelligent_text_analysis(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: intelligent_text_analysis() takes 3 positional arguments but 7 were given
2025-09-18 23:15:39,409 - main - INFO - Iniciando aplicação CadVision API
2025-09-18 23:15:39,412 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 23:15:39,412 - main - INFO - Banco de dados inicializado
2025-09-18 23:16:16,203 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 23:16:19,391 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-18 23:16:19,393 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 3.25s
2025-09-18 23:16:19,393 - main - ERROR - Erro interno no processamento: intelligent_text_analysis() takes 3 positional arguments but 7 were given
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 163, in identify_image
    product_info = intelligent_text_analysis(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: intelligent_text_analysis() takes 3 positional arguments but 7 were given
2025-09-18 23:17:21,065 - main - INFO - Encerrando aplicação CadVision API
2025-09-18 23:17:22,852 - main - INFO - Iniciando aplicação CadVision API
2025-09-18 23:17:22,856 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 23:17:22,856 - main - INFO - Banco de dados inicializado
2025-09-18 23:18:08,111 - main - INFO - Encerrando aplicação CadVision API
2025-09-18 23:18:09,861 - main - INFO - Iniciando aplicação CadVision API
2025-09-18 23:18:09,864 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 23:18:09,864 - main - INFO - Banco de dados inicializado
2025-09-18 23:18:14,809 - main - INFO - Encerrando aplicação CadVision API
2025-09-18 23:18:18,360 - main - INFO - Iniciando aplicação CadVision API
2025-09-18 23:18:18,363 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 23:18:18,364 - main - INFO - Banco de dados inicializado
2025-09-18 23:18:37,682 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 23:18:42,199 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-18 23:18:42,201 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 4.58s
2025-09-18 23:18:42,201 - main - ERROR - Erro interno no processamento: intelligent_text_analysis() takes 4 positional arguments but 7 were given
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 163, in identify_image
    product_info = intelligent_text_analysis(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: intelligent_text_analysis() takes 4 positional arguments but 7 were given
2025-09-18 23:25:45,087 - main - INFO - Encerrando aplicação CadVision API
2025-09-18 23:25:46,872 - main - INFO - Iniciando aplicação CadVision API
2025-09-18 23:25:46,875 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 23:25:46,875 - main - INFO - Banco de dados inicializado
2025-09-18 23:26:07,400 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 23:26:11,077 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-18 23:26:11,079 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 3.74s
2025-09-18 23:26:11,079 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-18 23:26:11,080 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '', 'title': 'Produto não identificado', 'brand': None, 'category': None, 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-18 23:32:52,663 - main - INFO - Encerrando aplicação CadVision API
2025-09-18 23:32:54,424 - main - INFO - Iniciando aplicação CadVision API
2025-09-18 23:32:54,429 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 23:32:54,429 - main - INFO - Banco de dados inicializado
2025-09-18 23:34:26,821 - main - INFO - Encerrando aplicação CadVision API
2025-09-18 23:34:28,541 - main - INFO - Iniciando aplicação CadVision API
2025-09-18 23:34:28,544 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 23:34:28,545 - main - INFO - Banco de dados inicializado
2025-09-18 23:34:30,809 - main - INFO - Encerrando aplicação CadVision API
2025-09-18 23:34:34,786 - main - INFO - Iniciando aplicação CadVision API
2025-09-18 23:34:34,789 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 23:34:34,789 - main - INFO - Banco de dados inicializado
2025-09-18 23:35:11,863 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 23:35:14,971 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-18 23:35:14,971 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-18 23:35:14,971 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-18 23:35:14,973 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 3.16s
2025-09-18 23:35:14,973 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-18 23:35:14,974 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7891340365576
2025-09-18 23:35:16,590 - app.services.product_service - INFO - Novo produto com GTIN 7891340365576 salvo no cache local.
2025-09-18 23:36:28,522 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 23:36:31,734 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-18 23:36:31,734 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-18 23:36:31,735 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-18 23:36:31,735 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 3.27s
2025-09-18 23:36:31,735 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-18 23:36:31,736 - app.services.product_service - INFO - Sucesso! GTIN 7891340365576 encontrado no cache local.
2025-09-18 23:40:55,113 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 23:40:58,855 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-18 23:40:58,855 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-18 23:40:58,855 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-18 23:40:58,856 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 3.80s
2025-09-18 23:40:58,856 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-18 23:40:58,857 - app.services.product_service - INFO - Sucesso! GTIN 7891340365576 encontrado no cache local.
2025-09-18 23:43:50,930 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 23:43:52,627 - app.services.vision_service - INFO - Vision API: Texto extraído (20 chars), Logos: 0, Labels: 2
2025-09-18 23:43:52,627 - app.services.vision_service - INFO - Texto bruto: '78980554208111
a
eld' -> Texto limpo para análise: '78980554208111'
2025-09-18 23:43:52,627 - app.services.vision_service - INFO - GTIN validado com sucesso: 7898055420811
2025-09-18 23:43:52,628 - main - INFO - Dados extraídos - Texto: 20 chars, Logos: [], Sucesso: True, Tempo: 1.74s
2025-09-18 23:43:52,628 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7898055420811). Iniciando validação.
2025-09-18 23:43:52,629 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7898055420811
2025-09-18 23:43:54,042 - app.services.product_service - INFO - Novo produto com GTIN 7898055420811 salvo no cache local.
2025-09-18 23:46:09,374 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 23:46:12,258 - app.services.vision_service - INFO - Vision API: Texto extraído (34 chars), Logos: 0, Labels: 1
2025-09-18 23:46:12,258 - app.services.vision_service - INFO - Texto bruto: 'MEDIO
CADO NO BRASIL
7909961682207' -> Texto limpo para análise: '7909961682207'
2025-09-18 23:46:12,259 - app.services.vision_service - INFO - GTIN validado com sucesso: 7909961682207
2025-09-18 23:46:12,259 - main - INFO - Dados extraídos - Texto: 34 chars, Logos: [], Sucesso: True, Tempo: 2.95s
2025-09-18 23:46:12,259 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7909961682207). Iniciando validação.
2025-09-18 23:46:12,260 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7909961682207
2025-09-18 23:46:13,763 - app.services.product_service - WARNING - API Cosmos não retornou dados válidos
2025-09-18 23:46:13,763 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-18 23:46:13,764 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '7909961682207', 'title': 'CADO NO BRASIL', 'brand': None, 'category': None, 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-18 23:47:15,992 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 23:47:19,619 - app.services.vision_service - INFO - Vision API: Texto extraído (468 chars), Logos: 1, Labels: 7
2025-09-18 23:47:19,619 - app.services.vision_service - INFO - Texto bruto: 'Experimente.
Quer mais
informações e
dicas de receitas
deliciosas?
É só acessar o
QR Code
ao lado.
MANTER REFRIGERADO EM
MPERATURAS ENTRE 5°C E 16°C.
ÓS ABERTO, CONSUMIR EM ATÉ
O DIAS, DENTRO DO PRAZO DE
VALIDADE.
77838 V20 GEN
PP
EMBALAGEM RECICLAVEL
7 894904 571949
ZIDO POR: SEARA ALIMENTOS LTDA. (G) ROD. JORGE LACERDA, KM 20, N°
GASPAR-SC BRASIL CNPJ 02.914.460/0448-75 (J) AV. ALEXANDRE MACKENZIE,
SORIOS GRASH CNPL02 914 469/0446-03 (S) AV. PORTUÁRIA, S/N°
STRA' -> Texto limpo para análise: '51677838207894904571949200291446004487502914469044603'
2025-09-18 23:47:19,620 - app.services.vision_service - INFO - GTIN validado com sucesso: 4904571949200
2025-09-18 23:47:19,621 - main - INFO - Dados extraídos - Texto: 468 chars, Logos: ['Stylenanda'], Sucesso: True, Tempo: 3.68s
2025-09-18 23:47:19,621 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (4904571949200). Iniciando validação.
2025-09-18 23:47:19,622 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 4904571949200
2025-09-18 23:47:21,077 - app.services.product_service - WARNING - API Cosmos não retornou dados válidos
2025-09-18 23:47:21,078 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-18 23:47:21,078 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '4904571949200', 'title': 'GASPAR-SC BRASIL CNPJ 02.914.4600448-75 (J) AV. ALEXANDRE MACKENZIE,', 'brand': 'Stylenanda', 'category': None, 'ncm': '', 'cest': '', 'confidence': 0.8, 'detected_patterns': ['logo_detection']}
2025-09-18 23:47:40,388 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-18 23:47:43,861 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-18 23:47:43,871 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-18 23:47:43,871 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 3.53s
2025-09-18 23:47:43,871 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-18 23:47:43,872 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7896022200534
2025-09-18 23:47:45,254 - app.services.product_service - INFO - Novo produto com GTIN 7896022200534 salvo no cache local.
2025-09-18 23:49:05,937 - main - INFO - Encerrando aplicação CadVision API
2025-09-18 23:49:07,692 - main - INFO - Iniciando aplicação CadVision API
2025-09-18 23:49:07,696 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 23:49:07,696 - main - INFO - Banco de dados inicializado
2025-09-18 23:49:10,188 - main - INFO - Encerrando aplicação CadVision API
2025-09-18 23:49:11,995 - main - INFO - Iniciando aplicação CadVision API
2025-09-18 23:49:11,998 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-18 23:49:11,998 - main - INFO - Banco de dados inicializado
2025-09-18 23:49:13,707 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 07:35:56,714 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 07:35:56,727 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 07:35:56,727 - main - INFO - Banco de dados inicializado
2025-09-19 07:36:41,648 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 07:36:46,129 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-19 07:36:46,129 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-19 07:36:46,130 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-19 07:36:46,131 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 4.58s
2025-09-19 07:36:46,131 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-19 07:36:46,132 - app.services.product_service - INFO - Sucesso! GTIN 7891340365576 encontrado no cache local.
2025-09-19 07:39:38,497 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 07:39:38,501 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 07:39:38,501 - main - INFO - Banco de dados inicializado
2025-09-19 07:49:47,448 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 07:49:51,204 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 07:49:51,418 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 07:49:51,419 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 4.02s
2025-09-19 07:49:51,419 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 07:49:51,420 - app.services.product_service - INFO - Sucesso! GTIN 7896022200534 encontrado no cache local.
2025-09-19 07:51:06,821 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 07:51:30,153 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 07:51:30,156 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 07:51:30,156 - main - INFO - Banco de dados inicializado
2025-09-19 07:51:57,665 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 07:52:00,638 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-19 07:52:00,639 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-19 07:52:00,639 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-19 07:52:00,641 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 3.03s
2025-09-19 07:52:00,641 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-19 07:52:00,642 - app.services.product_service - INFO - Sucesso! GTIN 7891340365576 encontrado no cache local.
2025-09-19 07:52:23,777 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 07:52:26,750 - app.services.vision_service - INFO - Vision API: Texto extraído (116 chars), Logos: 0, Labels: 5
2025-09-19 07:52:26,750 - app.services.vision_service - INFO - Texto bruto: 'PORTADORES
-Catete-
ARGENTINA
2000-Rosar
BOLIVIA-
aya 774
La Paz
Bodega V-1-
BRANDS
78474
17201
33114-
7891340365576' -> Texto limpo para análise: '200077417847417201331147891340365576'
2025-09-19 07:52:26,751 - app.services.vision_service - WARNING - Nenhum GTIN válido encontrado no texto limpo: '200077417847417201331147891340365576'
2025-09-19 07:52:26,752 - main - INFO - Dados extraídos - Texto: 116 chars, Logos: [], Sucesso: True, Tempo: 3.03s
2025-09-19 07:52:26,752 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-19 07:52:26,752 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '', 'title': 'Bodega V-1-', 'brand': None, 'category': None, 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-19 07:54:01,906 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 07:54:04,217 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-19 07:54:04,217 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-19 07:54:04,217 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-19 07:54:04,218 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 2.37s
2025-09-19 07:54:04,218 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-19 07:54:04,219 - app.services.product_service - INFO - Sucesso! GTIN 7891340365576 encontrado no cache local.
2025-09-19 08:02:14,042 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 08:02:16,973 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-19 08:02:16,973 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-19 08:02:16,973 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-19 08:02:16,973 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 2.98s
2025-09-19 08:02:16,974 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-19 08:02:16,975 - app.services.product_service - INFO - Sucesso! GTIN 7891340365576 encontrado no cache local.
2025-09-19 08:06:31,527 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 08:06:35,718 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-19 08:06:35,719 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-19 08:06:35,719 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-19 08:06:35,719 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 4.25s
2025-09-19 08:06:35,719 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-19 08:06:35,720 - app.services.product_service - INFO - Sucesso! GTIN 7891340365576 encontrado no cache local.
2025-09-19 08:08:26,257 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 08:09:13,562 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 08:09:13,567 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 08:09:13,567 - main - INFO - Banco de dados inicializado
2025-09-19 08:20:34,720 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 08:20:36,479 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 08:20:36,483 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 08:20:36,483 - main - INFO - Banco de dados inicializado
2025-09-19 08:20:54,475 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 08:20:58,483 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 08:20:58,502 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 08:20:58,504 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 4.08s
2025-09-19 08:20:58,504 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 08:20:58,505 - app.services.product_service - INFO - Sucesso! GTIN 7896022200534 encontrado no cache local.
2025-09-19 08:21:22,575 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 08:21:25,445 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-19 08:21:25,446 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-19 08:21:25,446 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-19 08:21:25,446 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 2.93s
2025-09-19 08:21:25,446 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-19 08:21:25,447 - app.services.product_service - INFO - Sucesso! GTIN 7891340365576 encontrado no cache local.
2025-09-19 08:21:33,144 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 08:21:36,022 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 08:21:36,032 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 08:21:36,032 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 2.93s
2025-09-19 08:21:36,032 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 08:21:36,033 - app.services.product_service - INFO - Sucesso! GTIN 7896022200534 encontrado no cache local.
2025-09-19 08:24:26,435 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 08:24:29,331 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 08:24:29,341 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 08:24:29,341 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 2.95s
2025-09-19 08:24:29,341 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 08:24:29,342 - app.services.product_service - INFO - Sucesso! GTIN 7896022200534 encontrado no cache local.
2025-09-19 08:27:08,749 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 08:27:11,059 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-19 08:27:11,059 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-19 08:27:11,059 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-19 08:27:11,060 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 2.37s
2025-09-19 08:27:11,060 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-19 08:27:11,061 - app.services.product_service - INFO - Sucesso! GTIN 7891340365576 encontrado no cache local.
2025-09-19 08:27:16,274 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 08:27:18,457 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 08:27:18,467 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 08:27:18,467 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 2.24s
2025-09-19 08:27:18,467 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 08:27:18,468 - app.services.product_service - INFO - Sucesso! GTIN 7896022200534 encontrado no cache local.
2025-09-19 09:48:06,116 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 09:48:06,129 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 09:48:06,129 - main - INFO - Banco de dados inicializado
2025-09-19 09:56:27,566 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 09:56:30,747 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 09:56:30,962 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 09:56:30,964 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 3.49s
2025-09-19 09:56:30,964 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 09:56:30,965 - app.services.product_service - INFO - Sucesso! GTIN 7896022200534 encontrado no cache local.
2025-09-19 10:00:36,259 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 10:00:38,877 - app.services.vision_service - INFO - Vision API: Texto extraído (331 chars), Logos: 0, Labels: 3
2025-09-19 10:00:38,878 - app.services.vision_service - INFO - Texto bruto: 'de
R
SUB
800
Orientações de usoc
Abra a tampa Flip-Top. Abra a etiqueta autoadesiva
no local indicado. Após uso, mantenha fechado para
Conservar a umidade.
Retire a toalhinha, puxando pelo centro.
Após o uso, descartar a toalhinha no lixo.
7 898937 345775
Prazo de Validade: 24 meses após a data de
fabricação impressa na embalagem' -> Texto limpo para análise: '800789893734577524'
2025-09-19 10:00:38,879 - app.services.vision_service - WARNING - Nenhum GTIN válido encontrado no texto limpo: '800789893734577524'
2025-09-19 10:00:38,879 - main - INFO - Dados extraídos - Texto: 331 chars, Logos: [], Sucesso: True, Tempo: 2.68s
2025-09-19 10:00:38,880 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-19 10:00:38,880 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '', 'title': 'Abra a tampa Flip-Top. Abra a etiqueta autoadesiva', 'brand': None, 'category': None, 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-19 10:02:54,016 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 10:02:56,311 - app.services.vision_service - INFO - Vision API: Texto extraído (91 chars), Logos: 0, Labels: 1
2025-09-19 10:02:56,311 - app.services.vision_service - INFO - Texto bruto: '7 898937345775
Prazo de Validade: 24 meses após a data de
fabricação impressa na embalagem.' -> Texto limpo para análise: '789893734577524'
2025-09-19 10:02:56,312 - app.services.vision_service - INFO - GTIN validado com sucesso: 7898937345775
2025-09-19 10:02:56,312 - main - INFO - Dados extraídos - Texto: 91 chars, Logos: [], Sucesso: True, Tempo: 2.31s
2025-09-19 10:02:56,312 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7898937345775). Iniciando validação.
2025-09-19 10:02:56,313 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7898937345775
2025-09-19 10:02:57,871 - app.services.product_service - INFO - Novo produto com GTIN 7898937345775 salvo no cache local.
2025-09-19 10:20:45,934 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 10:21:31,522 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 10:21:31,526 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 10:21:31,526 - main - INFO - Banco de dados inicializado
2025-09-19 10:22:47,776 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 10:22:49,563 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 10:22:49,567 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 10:22:49,568 - main - INFO - Banco de dados inicializado
2025-09-19 10:22:51,047 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 10:23:05,743 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 10:23:05,747 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 10:23:05,747 - main - INFO - Banco de dados inicializado
2025-09-19 10:23:07,549 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 10:23:07,552 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 10:23:07,552 - main - INFO - Banco de dados inicializado
2025-09-19 10:24:17,683 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 10:24:20,234 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 10:24:20,254 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 10:24:20,255 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 2.62s
2025-09-19 10:24:20,255 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 10:24:20,256 - app.services.product_service - INFO - Sucesso! GTIN 7896022200534 encontrado no cache local.
2025-09-19 10:29:02,851 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 10:29:02,854 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 10:29:02,855 - main - INFO - Banco de dados inicializado
2025-09-19 10:30:23,283 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 10:31:19,675 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 10:31:19,679 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 10:31:19,679 - main - INFO - Banco de dados inicializado
2025-09-19 10:35:31,445 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 10:35:37,921 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 10:35:37,924 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 10:35:37,924 - main - INFO - Banco de dados inicializado
2025-09-19 10:37:02,738 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 10:37:04,577 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 10:37:04,581 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 10:37:04,581 - main - INFO - Banco de dados inicializado
2025-09-19 10:37:14,420 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 10:38:03,727 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 10:38:03,730 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 10:38:03,730 - main - INFO - Banco de dados inicializado
2025-09-19 11:15:07,516 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 11:15:07,520 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 11:15:07,520 - main - INFO - Banco de dados inicializado
2025-09-19 11:15:47,401 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 11:15:49,829 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 11:15:49,985 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 11:15:49,987 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 2.64s
2025-09-19 11:15:49,987 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 11:15:49,988 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7896022200534
2025-09-19 11:15:51,551 - app.services.product_service - INFO - Novo produto com GTIN 7896022200534 salvo no cache local.
2025-09-19 11:25:42,202 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 11:25:42,205 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 11:25:42,205 - main - INFO - Banco de dados inicializado
2025-09-19 11:26:03,166 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 11:26:05,854 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-19 11:26:05,855 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-19 11:26:05,855 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-19 11:26:05,856 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 2.75s
2025-09-19 11:26:05,857 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-19 11:26:05,857 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7891340365576
2025-09-19 11:26:07,312 - app.services.product_service - INFO - Novo produto com GTIN 7891340365576 salvo no cache local.
2025-09-19 11:39:10,057 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 11:39:10,060 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 11:39:10,060 - main - INFO - Banco de dados inicializado
2025-09-19 11:39:29,087 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 11:39:31,722 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 11:39:31,741 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 11:39:31,743 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 2.70s
2025-09-19 11:39:31,743 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 11:39:31,744 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7896022200534
2025-09-19 11:39:33,191 - app.services.product_service - INFO - Novo produto com GTIN 7896022200534 salvo no cache local.
2025-09-19 11:39:35,409 - app.database - ERROR - Erro ao inserir produto: no such column: image_hash
2025-09-19 11:39:35,410 - main - ERROR - Erro ao salvar produto: 500: Erro ao salvar o produto no banco de dados
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 256, in save_product
    raise HTTPException(
fastapi.exceptions.HTTPException: 500: Erro ao salvar o produto no banco de dados
2025-09-19 11:39:57,265 - app.database - ERROR - Erro ao inserir produto: no such column: image_hash
2025-09-19 11:39:57,265 - main - ERROR - Erro ao salvar produto: 500: Erro ao salvar o produto no banco de dados
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 256, in save_product
    raise HTTPException(
fastapi.exceptions.HTTPException: 500: Erro ao salvar o produto no banco de dados
2025-09-19 11:49:31,592 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 11:49:33,379 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 11:49:33,382 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 11:49:33,382 - main - INFO - Banco de dados inicializado
2025-09-19 11:50:05,555 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 11:50:08,553 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 11:50:08,572 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 11:50:08,573 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 3.07s
2025-09-19 11:50:08,574 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 11:50:08,574 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7896022200534
2025-09-19 11:50:10,052 - app.services.product_service - INFO - Novo produto com GTIN 7896022200534 salvo no cache local.
2025-09-19 11:50:30,636 - app.database - ERROR - Erro ao inserir produto: no such column: image_hash
2025-09-19 11:50:30,636 - main - ERROR - Erro ao salvar produto: 500: Erro ao salvar o produto no banco de dados
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 256, in save_product
    raise HTTPException(
fastapi.exceptions.HTTPException: 500: Erro ao salvar o produto no banco de dados
2025-09-19 11:50:47,611 - app.database - ERROR - Erro ao inserir produto: no such column: image_hash
2025-09-19 11:50:47,611 - main - ERROR - Erro ao salvar produto: 500: Erro ao salvar o produto no banco de dados
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 256, in save_product
    raise HTTPException(
fastapi.exceptions.HTTPException: 500: Erro ao salvar o produto no banco de dados
2025-09-19 12:02:10,545 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 12:02:12,348 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 12:02:12,397 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 12:02:12,397 - main - INFO - Banco de dados inicializado
2025-09-19 12:03:37,440 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 12:04:47,858 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 12:04:47,862 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 12:04:47,862 - main - INFO - Banco de dados inicializado
2025-09-19 12:04:54,261 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 12:05:20,467 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 12:05:20,469 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 12:05:20,470 - main - INFO - Banco de dados inicializado
2025-09-19 12:06:01,717 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 12:06:12,197 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 12:06:12,199 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 12:06:12,200 - main - INFO - Banco de dados inicializado
2025-09-19 12:27:44,349 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 12:27:46,126 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 12:27:46,129 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 12:27:46,129 - main - INFO - Banco de dados inicializado
2025-09-19 12:27:55,983 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 12:27:57,755 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 12:27:57,803 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 12:27:57,803 - main - INFO - Banco de dados inicializado
2025-09-19 12:28:18,272 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 12:28:32,559 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 12:28:32,613 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 12:28:32,613 - main - INFO - Banco de dados inicializado
2025-09-19 12:29:31,889 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 12:29:33,619 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 12:29:33,623 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 12:29:33,623 - main - INFO - Banco de dados inicializado
2025-09-19 12:29:34,441 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 12:29:45,377 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 12:29:45,380 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 12:29:45,380 - main - INFO - Banco de dados inicializado
2025-09-19 12:30:13,806 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 12:30:17,586 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 12:30:17,605 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 12:30:17,606 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 3.85s
2025-09-19 12:30:17,607 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 12:30:17,608 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7896022200534
2025-09-19 12:30:19,077 - app.services.product_service - INFO - Novo produto com GTIN 7896022200534 salvo no cache local.
2025-09-19 13:26:36,223 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 13:26:38,664 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-19 13:26:38,665 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-19 13:26:38,665 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-19 13:26:38,666 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 2.50s
2025-09-19 13:26:38,666 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-19 13:26:38,667 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7891340365576
2025-09-19 13:26:40,125 - app.services.product_service - INFO - Novo produto com GTIN 7891340365576 salvo no cache local.
2025-09-19 13:38:24,085 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 13:38:38,799 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 13:38:38,803 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 13:38:38,803 - main - INFO - Banco de dados inicializado
2025-09-19 13:40:07,349 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 13:40:09,886 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-19 13:40:09,887 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-19 13:40:09,887 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-19 13:40:09,888 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 2.60s
2025-09-19 13:40:09,889 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-19 13:40:09,889 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7891340365576
2025-09-19 13:40:11,442 - app.services.product_service - INFO - Novo produto com GTIN 7891340365576 salvo no cache local.
2025-09-19 13:49:11,827 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 13:49:13,563 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 13:49:13,610 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 13:49:13,611 - main - INFO - Banco de dados inicializado
2025-09-19 13:49:27,706 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 13:49:30,220 - app.services.vision_service - INFO - Vision API: Texto extraído (20 chars), Logos: 0, Labels: 2
2025-09-19 13:49:30,220 - app.services.vision_service - INFO - Texto bruto: '78980554208111
a
eld' -> Texto limpo para análise: '78980554208111'
2025-09-19 13:49:30,221 - app.services.vision_service - INFO - GTIN validado com sucesso: 7898055420811
2025-09-19 13:49:30,222 - main - INFO - Dados extraídos - Texto: 20 chars, Logos: [], Sucesso: True, Tempo: 2.56s
2025-09-19 13:49:30,222 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7898055420811). Iniciando validação.
2025-09-19 13:49:30,223 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7898055420811
2025-09-19 13:49:31,760 - app.services.product_service - INFO - Novo produto com GTIN 7898055420811 salvo no cache local.
2025-09-19 13:50:00,165 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 13:50:02,959 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 13:50:02,970 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 13:50:02,970 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 2.85s
2025-09-19 13:50:02,971 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 13:50:02,971 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7896022200534
2025-09-19 13:50:04,344 - app.services.product_service - INFO - Novo produto com GTIN 7896022200534 salvo no cache local.
2025-09-19 13:50:19,572 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 13:50:23,113 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-19 13:50:23,113 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-19 13:50:23,113 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-19 13:50:23,114 - main - INFO - Dados extraídos - Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 3.60s
2025-09-19 13:50:23,114 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-19 13:50:23,114 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7891340365576
2025-09-19 13:50:24,490 - app.services.product_service - INFO - Novo produto com GTIN 7891340365576 salvo no cache local.
2025-09-19 13:53:11,822 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 13:53:13,605 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 13:53:13,608 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 13:53:13,608 - main - INFO - Banco de dados inicializado
2025-09-19 13:53:56,833 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 13:53:58,650 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 13:53:58,653 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 13:53:58,653 - main - INFO - Banco de dados inicializado
2025-09-19 13:54:27,213 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 13:54:28,969 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 13:54:28,972 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 13:54:28,972 - main - INFO - Banco de dados inicializado
2025-09-19 13:58:54,233 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 13:58:56,055 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 13:58:56,058 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 13:58:56,058 - main - INFO - Banco de dados inicializado
2025-09-19 14:02:37,986 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 14:02:40,985 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 14:02:41,004 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 14:02:41,005 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 3.07s
2025-09-19 14:02:41,006 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 14:02:41,006 - app.services.product_service - INFO - Sucesso! GTIN 7896022200534 encontrado no cache local.
2025-09-19 14:12:01,832 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 14:12:03,570 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 14:12:03,573 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 14:12:03,573 - main - INFO - Banco de dados inicializado
2025-09-19 14:14:05,186 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 14:14:06,921 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 14:14:06,923 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 14:14:06,924 - main - INFO - Banco de dados inicializado
2025-09-19 14:22:10,760 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 14:22:12,487 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 14:22:12,490 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 14:22:12,490 - main - INFO - Banco de dados inicializado
2025-09-19 14:22:19,652 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 14:22:21,456 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 14:22:21,458 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 14:22:21,459 - main - INFO - Banco de dados inicializado
2025-09-19 14:22:42,935 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 14:22:45,911 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 14:22:45,930 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 14:22:45,931 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 3.05s
2025-09-19 14:22:45,932 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 14:22:45,932 - app.services.product_service - INFO - Sucesso! GTIN 7896022200534 encontrado no cache local.
2025-09-19 14:37:46,187 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 14:43:03,550 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 14:43:03,553 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 14:43:03,553 - main - INFO - Banco de dados inicializado
2025-09-19 14:43:25,722 - main - INFO - Imagem duplicada encontrada para o hash: 9bb1516d4f8c2209c62d366630cfc6bb
2025-09-19 14:51:23,669 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 14:51:26,073 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 14:51:26,093 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 14:51:26,094 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 2.48s
2025-09-19 14:51:26,094 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 14:51:26,095 - app.services.product_service - INFO - Sucesso! GTIN 7896022200534 encontrado no cache local.
2025-09-19 14:51:26,095 - main - ERROR - Erro interno no processamento: 1 validation error for IdentificationResult
confidence
  Input should be a valid number [type=float_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/float_type
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 206, in identify_image
    return IdentificationResult(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for IdentificationResult
confidence
  Input should be a valid number [type=float_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/float_type
2025-09-19 14:54:56,065 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 14:54:57,819 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 14:54:57,822 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 14:54:57,822 - main - INFO - Banco de dados inicializado
2025-09-19 14:55:01,963 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 14:55:03,762 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 14:55:03,765 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 14:55:03,765 - main - INFO - Banco de dados inicializado
2025-09-19 14:55:05,925 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 14:55:15,032 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 14:55:15,035 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 14:55:15,035 - main - INFO - Banco de dados inicializado
2025-09-19 14:55:33,003 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 14:55:35,403 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 14:55:35,423 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 14:55:35,424 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 2.47s
2025-09-19 14:55:35,425 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 14:55:35,425 - app.services.product_service - INFO - Sucesso! GTIN 7896022200534 encontrado no cache local.
2025-09-19 14:55:35,426 - main - ERROR - Erro interno no processamento: 1 validation error for IdentificationResult
confidence
  Input should be a valid number [type=float_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/float_type
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 206, in identify_image
    return IdentificationResult(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for IdentificationResult
confidence
  Input should be a valid number [type=float_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/float_type
2025-09-19 14:55:43,380 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 14:55:45,511 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 14:55:45,520 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 14:55:45,521 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 2.19s
2025-09-19 14:55:45,521 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 14:55:45,521 - app.services.product_service - INFO - Sucesso! GTIN 7896022200534 encontrado no cache local.
2025-09-19 14:55:45,522 - main - ERROR - Erro interno no processamento: 1 validation error for IdentificationResult
confidence
  Input should be a valid number [type=float_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/float_type
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 206, in identify_image
    return IdentificationResult(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for IdentificationResult
confidence
  Input should be a valid number [type=float_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/float_type
2025-09-19 15:00:44,143 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 15:00:45,904 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 15:00:45,907 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 15:00:45,907 - main - INFO - Banco de dados inicializado
2025-09-19 15:02:53,490 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 15:02:55,276 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 15:02:55,278 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 15:02:55,279 - main - INFO - Banco de dados inicializado
2025-09-19 15:04:21,467 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 15:04:23,282 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 15:04:23,285 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 15:04:23,285 - main - INFO - Banco de dados inicializado
2025-09-19 15:04:26,546 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 15:04:35,160 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 15:04:35,162 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 15:04:35,163 - main - INFO - Banco de dados inicializado
2025-09-19 15:04:51,356 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 15:04:53,902 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 15:04:53,921 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 15:04:53,923 - main - INFO - Dados extraídos - Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 2.62s
2025-09-19 15:04:53,923 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 15:04:53,923 - app.services.product_service - INFO - Sucesso! GTIN 7896022200534 encontrado no cache local.
2025-09-19 15:04:53,924 - main - ERROR - Erro interno no processamento: 1 validation error for IdentificationResult
confidence
  Input should be a valid number [type=float_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/float_type
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 210, in identify_image
    return IdentificationResult(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for IdentificationResult
confidence
  Input should be a valid number [type=float_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.11/v/float_type
2025-09-19 15:09:26,645 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 15:09:28,394 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 15:09:28,397 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 15:09:28,397 - main - INFO - Banco de dados inicializado
2025-09-19 15:09:40,755 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 15:09:43,129 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 15:09:43,148 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 15:09:43,150 - main - INFO - Dados extraídos - GTIN: 7896022200534, Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 2.44s
2025-09-19 15:09:43,150 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 15:09:43,150 - app.services.product_service - INFO - Sucesso! GTIN 7896022200534 encontrado no cache local.
2025-09-19 15:12:23,658 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 15:12:25,417 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 15:12:25,420 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 15:12:25,420 - main - INFO - Banco de dados inicializado
2025-09-19 15:12:35,634 - main - INFO - Imagem duplicada encontrada para o hash: 9bb1516d4f8c2209c62d366630cfc6bb
2025-09-19 15:13:11,795 - main - INFO - Imagem duplicada encontrada para o hash: 9bb1516d4f8c2209c62d366630cfc6bb
2025-09-19 15:13:45,424 - main - INFO - Imagem duplicada encontrada para o hash: 9bb1516d4f8c2209c62d366630cfc6bb
2025-09-19 15:20:04,201 - main - INFO - Imagem duplicada encontrada para o hash: 9bb1516d4f8c2209c62d366630cfc6bb
2025-09-19 15:28:54,251 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 15:28:56,110 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 15:28:56,113 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 15:28:56,113 - main - INFO - Banco de dados inicializado
2025-09-19 15:28:57,821 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 16:14:36,508 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 16:14:36,511 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 16:14:36,511 - main - INFO - Banco de dados inicializado
2025-09-19 16:14:45,057 - main - INFO - Imagem duplicada encontrada para o hash: 9bb1516d4f8c2209c62d366630cfc6bb
2025-09-19 16:15:34,949 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 16:15:37,574 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 16:15:37,594 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 16:15:37,595 - main - INFO - Dados extraídos - GTIN: 7896022200534, Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 2.70s
2025-09-19 16:15:37,595 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 16:15:37,596 - app.services.product_service - INFO - Sucesso! GTIN 7896022200534 encontrado no cache local.
2025-09-19 16:31:05,893 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 16:49:16,440 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 16:49:16,443 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 16:49:16,443 - main - INFO - Banco de dados inicializado
2025-09-19 17:04:31,010 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 17:04:33,409 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 17:04:33,412 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 17:04:33,412 - main - INFO - Banco de dados inicializado
2025-09-19 17:05:47,319 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 17:05:49,574 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 17:05:49,577 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 17:05:49,577 - main - INFO - Banco de dados inicializado
2025-09-19 17:06:52,613 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 17:06:54,861 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 17:06:54,864 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 17:06:54,864 - main - INFO - Banco de dados inicializado
2025-09-19 17:07:07,911 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 17:07:10,155 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 17:07:10,200 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 17:07:10,201 - main - INFO - Banco de dados inicializado
2025-09-19 17:07:12,297 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 17:07:22,418 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 17:07:22,422 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 17:07:22,422 - main - INFO - Banco de dados inicializado
2025-09-19 17:07:49,993 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 17:07:52,344 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 17:07:52,363 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 17:07:52,364 - main - INFO - Dados extraídos - GTIN: 7896022200534, Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 2.42s
2025-09-19 17:07:52,365 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 17:07:52,365 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7896022200534
2025-09-19 17:08:18,075 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 17:08:19,213 - app.services.vision_service - INFO - Vision API: Texto extraído (21 chars), Logos: 0, Labels: 8
2025-09-19 17:08:19,214 - app.services.vision_service - INFO - Texto bruto: 'Fini
Gelatinas
Beijos' -> Texto limpo para análise: ''
2025-09-19 17:08:19,214 - app.services.vision_service - WARNING - Nenhum GTIN válido encontrado no texto limpo: ''
2025-09-19 17:08:19,214 - main - INFO - Dados extraídos - GTIN: , Texto: 21 chars, Logos: [], Sucesso: True, Tempo: 1.16s
2025-09-19 17:08:19,215 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-19 17:08:19,215 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '', 'title': 'Gelatinas', 'brand': None, 'category': None, 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-19 17:08:31,492 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 17:08:34,989 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-19 17:08:34,989 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-19 17:08:34,989 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-19 17:08:34,990 - main - INFO - Dados extraídos - GTIN: 7891340365576, Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 3.55s
2025-09-19 17:08:34,990 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-19 17:08:34,991 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7891340365576
2025-09-19 17:11:09,627 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 17:11:11,928 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 17:11:11,930 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 17:11:11,930 - main - INFO - Banco de dados inicializado
2025-09-19 17:12:23,540 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 17:12:33,277 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 17:12:33,322 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 17:12:33,322 - main - INFO - Banco de dados inicializado
2025-09-19 17:12:47,935 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 17:12:50,214 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 17:12:50,233 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 17:12:50,235 - main - INFO - Dados extraídos - GTIN: 7896022200534, Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 2.35s
2025-09-19 17:12:50,235 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 17:12:50,236 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7896022200534
2025-09-19 17:14:45,202 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 17:14:47,605 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 17:14:47,607 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 17:14:47,608 - main - INFO - Banco de dados inicializado
2025-09-19 17:14:49,321 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 17:44:50,358 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 17:44:50,361 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 17:44:50,361 - main - INFO - Banco de dados inicializado
2025-09-19 17:45:01,539 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 17:45:04,265 - app.services.vision_service - INFO - Vision API: Texto extraído (20 chars), Logos: 0, Labels: 2
2025-09-19 17:45:04,265 - app.services.vision_service - INFO - Texto bruto: '78980554208111
a
eld' -> Texto limpo para análise: '78980554208111'
2025-09-19 17:45:04,266 - app.services.vision_service - INFO - GTIN validado com sucesso: 7898055420811
2025-09-19 17:45:04,267 - main - INFO - Dados extraídos - GTIN: 7898055420811, Texto: 20 chars, Logos: [], Sucesso: True, Tempo: 2.78s
2025-09-19 17:45:04,267 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7898055420811). Iniciando validação.
2025-09-19 17:45:04,268 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7898055420811
2025-09-19 17:45:23,403 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 17:45:26,219 - app.services.vision_service - INFO - Vision API: Texto extraído (510 chars), Logos: 1, Labels: 10
2025-09-19 17:45:26,219 - app.services.vision_service - INFO - Texto bruto: 'MAÇÃO NUTRICIONAL
ml (1 unidade)
ico (kcal)
100
220 ml %VD*
20
44
2
5
11
4
otals (g)
5
11
5
11
20
8.2
18
1
rados (9)
Quantidades significativas de
duras totais, Gorduras saturadas,
Te valores diários fornecidos pela
e Fibras alimentares.
THINDADE/GO, CNPJ 03.380.763/0015-07 6-RIO DE
EROIRJ, CNPJ 00.074.569/0001-00 7-SOROCABA
45.913.696/0001-85 8-UBERLÂNDIA REFRESCOS
94010001-10 9-SPAL
PAULINO BUENO COUTO,
MARCACAO. CONSERVAR
ODOR NÃO CONGELAR.
Coca-Cola Brasil
23-4200279
1642 160
894900 0250 19
RECICLE-ME' -> Texto limpo para análise: '110022020442511451151120821819033807630015076000745690001007459136960001858940100011092342002791642160894900025019'
2025-09-19 17:45:26,221 - app.services.vision_service - INFO - GTIN validado com sucesso: 64216089
2025-09-19 17:45:26,222 - main - INFO - Dados extraídos - GTIN: 64216089, Texto: 510 chars, Logos: ['The Coca-Cola Company'], Sucesso: True, Tempo: 2.87s
2025-09-19 17:45:26,222 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (64216089). Iniciando validação.
2025-09-19 17:45:26,223 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 64216089
2025-09-19 17:45:27,580 - app.services.product_service - WARNING - API Cosmos não retornou dados válidos
2025-09-19 17:45:27,580 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-19 17:45:27,581 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '64216089', 'title': 'THINDADEGO, CNPJ 03.380.7630015-07 6-RIO DE', 'brand': 'The Coca-Cola Company', 'category': 'Bebidas', 'ncm': '', 'cest': '', 'confidence': 0.8, 'detected_patterns': ['logo_detection']}
2025-09-19 17:46:37,915 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 17:46:39,402 - app.services.vision_service - INFO - Vision API: Texto extraído (91 chars), Logos: 0, Labels: 1
2025-09-19 17:46:39,402 - app.services.vision_service - INFO - Texto bruto: '7 898937345775
Prazo de Validade: 24 meses após a data de
fabricação impressa na embalagem.' -> Texto limpo para análise: '789893734577524'
2025-09-19 17:46:39,403 - app.services.vision_service - INFO - GTIN validado com sucesso: 7898937345775
2025-09-19 17:46:39,403 - main - INFO - Dados extraídos - GTIN: 7898937345775, Texto: 91 chars, Logos: [], Sucesso: True, Tempo: 1.50s
2025-09-19 17:46:39,403 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7898937345775). Iniciando validação.
2025-09-19 17:46:39,404 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7898937345775
2025-09-19 17:58:14,544 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 17:58:24,886 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 17:58:24,888 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 17:58:24,888 - main - INFO - Banco de dados inicializado
2025-09-19 18:11:13,793 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 18:11:17,325 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-19 18:11:17,326 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-19 18:11:17,326 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-19 18:11:17,327 - main - INFO - Dados extraídos - GTIN: 7891340365576, Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 3.60s
2025-09-19 18:11:17,327 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-19 18:11:17,328 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7891340365576
2025-09-19 18:13:22,903 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 18:13:54,421 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 18:13:54,424 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 18:13:54,424 - main - INFO - Banco de dados inicializado
2025-09-19 18:29:28,734 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 18:29:30,959 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 18:29:30,962 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 18:29:30,962 - main - INFO - Banco de dados inicializado
2025-09-19 18:39:09,490 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 19:08:33,597 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 19:08:33,600 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 19:08:33,600 - main - INFO - Banco de dados inicializado
2025-09-19 19:16:55,587 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 19:16:57,822 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 19:16:57,824 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 19:16:57,824 - main - INFO - Banco de dados inicializado
2025-09-19 19:17:51,597 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 19:17:53,842 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 19:17:53,845 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 19:17:53,845 - main - INFO - Banco de dados inicializado
2025-09-19 19:18:10,485 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 19:18:19,077 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 19:18:19,079 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 19:18:19,080 - main - INFO - Banco de dados inicializado
2025-09-19 19:21:39,391 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 19:21:41,579 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 19:21:41,582 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 19:21:41,582 - main - INFO - Banco de dados inicializado
2025-09-19 19:42:50,785 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 19:42:53,149 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 19:42:53,152 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 19:42:53,152 - main - INFO - Banco de dados inicializado
2025-09-19 19:43:13,517 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 19:43:22,681 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 19:43:22,684 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 19:43:22,684 - main - INFO - Banco de dados inicializado
2025-09-19 19:54:45,291 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 19:54:55,169 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 19:54:55,172 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 19:54:55,172 - main - INFO - Banco de dados inicializado
2025-09-19 20:18:54,974 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 20:18:58,686 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-19 20:18:58,686 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-19 20:18:58,687 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-19 20:18:58,688 - main - INFO - Dados extraídos - GTIN: 7891340365576, Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 3.77s
2025-09-19 20:18:58,688 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-19 20:18:58,689 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7891340365576
2025-09-19 20:24:16,804 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 20:24:28,783 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 20:24:28,786 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 20:24:28,786 - main - INFO - Banco de dados inicializado
2025-09-19 20:27:48,124 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 20:27:50,382 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 20:27:50,385 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 20:27:50,385 - main - INFO - Banco de dados inicializado
2025-09-19 20:30:00,501 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 20:30:02,744 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 20:30:02,746 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 20:30:02,747 - main - INFO - Banco de dados inicializado
2025-09-19 20:30:27,595 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 20:33:08,468 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 20:33:08,514 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 20:33:08,514 - main - INFO - Banco de dados inicializado
2025-09-19 20:34:39,848 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 20:34:43,513 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-19 20:34:43,513 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-19 20:34:43,513 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-19 20:34:43,515 - main - INFO - Dados extraídos - GTIN: 7891340365576, Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 3.72s
2025-09-19 20:34:43,515 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-19 20:34:43,516 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7891340365576
2025-09-19 20:44:10,901 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 20:44:13,280 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 20:44:13,283 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 20:44:13,283 - main - INFO - Banco de dados inicializado
2025-09-19 20:44:17,213 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 20:44:25,346 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 20:44:25,349 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 20:44:25,349 - main - INFO - Banco de dados inicializado
2025-09-19 20:49:55,028 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 20:49:58,090 - app.services.vision_service - INFO - Vision API: Texto extraído (238 chars), Logos: 0, Labels: 8
2025-09-19 20:49:58,091 - app.services.vision_service - INFO - Texto bruto: 'arroz
Tio João
100% GRAOS Sempre soltinho
NOBRES
Branquinho e saboroso
.Não precisa escolher
nem lavar
O arroz que
acompanha
ARROZ TIPO 1-CLASSE LONGO FINO
SUBGRUPO POLIDO - PESO LÍQUIDO 1kg
INDÚSTRIA BRASILEIRA
Tio João 100% GROS
NOBRES' -> Texto limpo para análise: '10011100'
2025-09-19 20:49:58,092 - app.services.vision_service - WARNING - Nenhum GTIN válido encontrado no texto limpo: '10011100'
2025-09-19 20:49:58,093 - main - INFO - Dados extraídos - GTIN: , Texto: 238 chars, Logos: [], Sucesso: True, Tempo: 3.11s
2025-09-19 20:49:58,093 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-19 20:49:58,094 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '', 'title': 'ARROZ TIPO 1-CLASSE LONGO FINO', 'brand': None, 'category': None, 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-19 20:50:05,022 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 20:50:07,877 - app.services.vision_service - INFO - Vision API: Texto extraído (238 chars), Logos: 0, Labels: 8
2025-09-19 20:50:07,878 - app.services.vision_service - INFO - Texto bruto: 'arroz
Tio João
100% GRAOS Sempre soltinho
NOBRES
Branquinho e saboroso
.Não precisa escolher
nem lavar
O arroz que
acompanha
ARROZ TIPO 1-CLASSE LONGO FINO
SUBGRUPO POLIDO - PESO LÍQUIDO 1kg
INDÚSTRIA BRASILEIRA
Tio João 100% GROS
NOBRES' -> Texto limpo para análise: '10011100'
2025-09-19 20:50:07,879 - app.services.vision_service - WARNING - Nenhum GTIN válido encontrado no texto limpo: '10011100'
2025-09-19 20:50:07,879 - main - INFO - Dados extraídos - GTIN: , Texto: 238 chars, Logos: [], Sucesso: True, Tempo: 2.90s
2025-09-19 20:50:07,879 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-19 20:50:07,880 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '', 'title': 'ARROZ TIPO 1-CLASSE LONGO FINO', 'brand': None, 'category': None, 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-19 20:50:19,507 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 20:50:21,418 - app.services.vision_service - INFO - Vision API: Texto extraído (1045 chars), Logos: 0, Labels: 10
2025-09-19 20:50:21,418 - app.services.vision_service - INFO - Texto bruto: 'EM AÇÚCAR
ALMENTAR
DEDE 2000 kcal
EBERGETICAS
185 G 23 C
17-01385
CENTRAL, S/N, MARACAMAD/CE, CHP) 07.196.033/0021-41.
REGISTRO HAPA: CE 000411-1.000003-5-REFRESCOS)
BANDEIRANTES IND, E COM. LTDA. - RUA 2, QUADRA 17,
TRINDADE/GO, CHP) 03.380.763/0015-07, REGISTRO MAPA:
60 000311-5.000026 6-RIO DE JANEIRO REFRESCOS
LTDA. RUA ANDRE ROCHA, 2299, RIO DE JANEIRO/RJ,
CNPJ 00.074.569/0001-00, REGISTRO MAPA:
RJ 000449-9.000005-7-SOROCABA REFRESCOS SA-
VIA RAPOSO TAVARES, km 104, SOROCABA/SP, CNPJ
45.91.696/0001-85, REGISTRO MAPA: SP 000459-6.000036
8-UBERLÂNDIA REFRESCOS LTDA-RUA TEREZINHA SEGADAES,
45, UBERLANDIA/MG, CNPJ 23.814.940/0001-10, REGISTRO MAPA:
MG 000296-8.000013-9-VONPAR REFR.S.A.-AV. ASSIS
BRASIL, 11200, PORTO ALEGRE/RS, CNPJ 91.235.549/0024-07,
REGISTRO MAPA: RS 000910-5.000002. CONSERVAR AO
ABRIGO DO SOLE CALOR, EM LOCAL LIMPO, SECO, AREJADO E SEN
ODOR, NÃO CONGELAR. VALIDADE/LOTE: VIDE FUNDO, AUT. CCIL/RI
INDUSTRIA BRASILEIRA SACC: 0800-021-2121
BAIXO TEOR DE SODIO
0398
NÃO CONTÉM GLUTEN
SEM AÇÚCARES
CONTEM FENILALANINA' -> Texto limpo para análise: '200018523170138507196033002141000411100000352170338076300150760000311500002662299000745690001000004499000005710445916960001850004596000036845238149400001100002968000013911200912355490024070009105000002080002121210398'
2025-09-19 20:50:21,420 - app.services.vision_service - INFO - GTIN validado com sucesso: 0311500002662
2025-09-19 20:50:21,422 - main - INFO - Dados extraídos - GTIN: 0311500002662, Texto: 1045 chars, Logos: [], Sucesso: True, Tempo: 1.94s
2025-09-19 20:50:21,422 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (0311500002662). Iniciando validação.
2025-09-19 20:50:21,422 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 0311500002662
2025-09-19 20:50:22,925 - app.services.product_service - WARNING - API Cosmos não retornou dados válidos
2025-09-19 20:50:22,925 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-19 20:50:22,926 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '0311500002662', 'title': 'ABRIGO DO SOLE CALOR, EM LOCAL LIMPO, SECO, AREJADO E SEN', 'brand': None, 'category': 'Bebidas', 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-19 20:50:37,225 - main - INFO - Imagem duplicada encontrada para o hash: e909fe0f6cb4c1043e03c0e2d2763f0d
2025-09-19 20:50:40,570 - main - INFO - Imagem duplicada encontrada para o hash: e909fe0f6cb4c1043e03c0e2d2763f0d
2025-09-19 20:51:56,608 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 20:51:59,993 - app.services.vision_service - INFO - Vision API: Texto extraído (116 chars), Logos: 0, Labels: 5
2025-09-19 20:51:59,993 - app.services.vision_service - INFO - Texto bruto: 'PORTADORES
-Catete-
ARGENTINA
2000-Rosar
BOLIVIA-
aya 774
La Paz
Bodega V-1-
BRANDS
78474
17201
33114-
7891340365576' -> Texto limpo para análise: '200077417847417201331147891340365576'
2025-09-19 20:51:59,994 - app.services.vision_service - WARNING - Nenhum GTIN válido encontrado no texto limpo: '200077417847417201331147891340365576'
2025-09-19 20:51:59,994 - main - INFO - Dados extraídos - GTIN: , Texto: 116 chars, Logos: [], Sucesso: True, Tempo: 3.44s
2025-09-19 20:51:59,994 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-19 20:51:59,995 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '', 'title': 'Bodega V-1-', 'brand': None, 'category': None, 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-19 20:52:32,994 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-19 20:52:35,805 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-19 20:52:35,816 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-19 20:52:35,816 - main - INFO - Dados extraídos - GTIN: 7896022200534, Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 2.87s
2025-09-19 20:52:35,817 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-19 20:52:35,817 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7896022200534
2025-09-19 22:07:10,371 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 22:07:12,766 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 22:07:12,769 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 22:07:12,769 - main - INFO - Banco de dados inicializado
2025-09-19 22:16:12,693 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 22:26:23,561 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 22:26:23,564 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 22:26:23,564 - main - INFO - Banco de dados inicializado
2025-09-19 22:32:01,203 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 22:32:03,453 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 22:32:03,456 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 22:32:03,456 - main - INFO - Banco de dados inicializado
2025-09-19 22:33:39,416 - main - INFO - Encerrando aplicação CadVision API
2025-09-19 22:33:41,701 - main - INFO - Iniciando aplicação CadVision API
2025-09-19 22:33:41,704 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-19 22:33:41,704 - main - INFO - Banco de dados inicializado
2025-09-19 22:52:52,837 - main - INFO - Encerrando aplicação CadVision API
2025-09-20 00:14:08,117 - main - INFO - Iniciando aplicação CadVision API
2025-09-20 00:14:08,120 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-20 00:14:08,120 - main - INFO - Banco de dados inicializado
2025-09-20 00:14:40,759 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-20 00:14:44,507 - app.services.vision_service - INFO - Vision API: Texto extraído (116 chars), Logos: 0, Labels: 5
2025-09-20 00:14:44,507 - app.services.vision_service - INFO - Texto bruto: 'PORTADORES
-Catete-
ARGENTINA
2000-Rosar
BOLIVIA-
aya 774
La Paz
Bodega V-1-
BRANDS
78474
17201
33114-
7891340365576' -> Texto limpo para análise: '200077417847417201331147891340365576'
2025-09-20 00:14:44,508 - app.services.vision_service - WARNING - Nenhum GTIN válido encontrado no texto limpo: '200077417847417201331147891340365576'
2025-09-20 00:14:44,510 - main - INFO - Dados extraídos - GTIN: , Texto: 116 chars, Logos: [], Sucesso: True, Tempo: 3.81s
2025-09-20 00:14:44,510 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-20 00:14:44,510 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '', 'title': 'Bodega V-1-', 'brand': None, 'category': None, 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-20 00:14:53,188 - main - INFO - Imagem duplicada encontrada para o hash: e909fe0f6cb4c1043e03c0e2d2763f0d
2025-09-20 00:15:02,830 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-20 00:15:06,392 - app.services.vision_service - INFO - Vision API: Texto extraído (20 chars), Logos: 0, Labels: 2
2025-09-20 00:15:06,392 - app.services.vision_service - INFO - Texto bruto: '78980554208111
a
eld' -> Texto limpo para análise: '78980554208111'
2025-09-20 00:15:06,392 - app.services.vision_service - INFO - GTIN validado com sucesso: 7898055420811
2025-09-20 00:15:06,393 - main - INFO - Dados extraídos - GTIN: 7898055420811, Texto: 20 chars, Logos: [], Sucesso: True, Tempo: 3.61s
2025-09-20 00:15:06,393 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7898055420811). Iniciando validação.
2025-09-20 00:15:06,393 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7898055420811
2025-09-20 00:56:46,193 - main - INFO - Encerrando aplicação CadVision API
2025-09-20 00:56:48,518 - main - INFO - Iniciando aplicação CadVision API
2025-09-20 00:56:48,520 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-20 00:56:48,521 - main - INFO - Banco de dados inicializado
2025-09-20 01:00:02,806 - main - INFO - Encerrando aplicação CadVision API
2025-09-20 01:00:05,009 - main - INFO - Iniciando aplicação CadVision API
2025-09-20 01:00:05,012 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-20 01:00:05,012 - main - INFO - Banco de dados inicializado
2025-09-20 01:05:03,668 - main - INFO - Encerrando aplicação CadVision API
2025-09-20 01:05:12,804 - main - INFO - Iniciando aplicação CadVision API
2025-09-20 01:05:12,806 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-20 01:05:12,807 - main - INFO - Banco de dados inicializado
2025-09-20 01:18:21,416 - main - INFO - Imagem duplicada encontrada para o hash: e909fe0f6cb4c1043e03c0e2d2763f0d
2025-09-20 01:22:26,341 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-20 01:22:30,790 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-20 01:22:30,809 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-20 01:22:30,811 - main - INFO - Dados extraídos - GTIN: 7896022200534, Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 4.52s
2025-09-20 01:22:30,811 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-20 01:22:30,812 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7896022200534
2025-09-20 01:28:13,736 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-20 01:28:19,249 - app.services.vision_service - INFO - Vision API: Texto extraído (1372 chars), Logos: 0, Labels: 8
2025-09-20 01:28:19,250 - app.services.vision_service - INFO - Texto bruto: 'e essas
ícias!
Sos Sabores
Ombinam
upaladar:
icional
INFORMAÇÃO NUTRICIONAL
Porção por embalagem: 6 porções
Porcão: 25 g (1/4 xicara
o (kcal)
Valor energético (
Carboidratos (g)
Açúcares totais (g)
Açúcares adicionados (e)
Proteinas (8)
Gorduras totals (g)
100 25 XVD
538 135
35
A
3,5
21
Gorduras saturadas (g)
5
Gorduras trans (8)
0
0
Fibras alimentares (g)
1,8
463
116
ae Salsa
com Limão
rrasco
er momento
quer lugar...
or curtição.
ses momentos.
bem com
vida!
endupa
dupa.com.br
NOV 2025
Sódio (mg)
Percentual de valores diários fornecidos pela porção
Ingredientes: amendoim, amido de milho
(Bacillus thuringiensis, Streptomyces
viridochromogenes, Agrobacterium
tumefaciens, Zea mays, Sphingobium
herbicidovorans e Diabrotica firgifera),
açúcar, farinha de trigo enriquecida com
ferro e ácido fólico, sal, gordura vegetal,
maltodextrina, fermento químico
bicarbonato de sódio, realçador de sabor
glutamato monossódico e corantes
artificiais: Tartrazina e amarelo crepúsculo FCF
ALÉRGICOS: CONTÉM AMENDOIM E
DERIVADOS DE TRIGO E SOJA. PODE
CONTER CENTEIO, CEVADA E AVEIA.
CONTÉM GLÚTEN.
MANTER EM LOCAL SECO, FRESCO E AREJADO.
PRODUZIDO POR:
AMENDUPA PRODUTOS ALIMENTÍCIOS LTDA.
R. Demétrio Hristafor Seirec Basan n°1.900
CEP17604-725-J. Guanabara - Tupä/SP
CNPJ 48.349.526/0001-08-IND. BRASILEIRA
Atendimento
14 3404-4545
amendupa@amendupa.com.br
7897115
11055611
EPEMA' -> Texto limpo para análise: '625148100255381353535215800184631162025190017604725483495260001081434044545789711511055611'
2025-09-20 01:28:19,253 - app.services.vision_service - INFO - GTIN validado com sucesso: 52600010814340
2025-09-20 01:28:19,254 - main - INFO - Dados extraídos - GTIN: 52600010814340, Texto: 1372 chars, Logos: [], Sucesso: True, Tempo: 5.57s
2025-09-20 01:28:19,254 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (52600010814340). Iniciando validação.
2025-09-20 01:28:19,255 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 52600010814340
2025-09-20 01:28:20,701 - app.services.product_service - WARNING - API Cosmos não retornou dados válidos
2025-09-20 01:28:20,701 - app.services.product_service - INFO - Prioridade 2: GTIN não validado ou Cosmos sem dados. Partindo para a inferência por logo e texto.
2025-09-20 01:28:20,702 - app.services.product_service - INFO - Resultado da inferência: {'gtin': '52600010814340', 'title': 'artificiais: Tartrazina e amarelo crepúsculo FCF', 'brand': None, 'category': 'Bebidas', 'ncm': '', 'cest': '', 'confidence': 0.6, 'detected_patterns': ['text_heuristic']}
2025-09-20 01:36:18,533 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-20 01:36:21,537 - app.services.vision_service - INFO - Vision API: Texto extraído (91 chars), Logos: 0, Labels: 1
2025-09-20 01:36:21,537 - app.services.vision_service - INFO - Texto bruto: '7 898937345775
Prazo de Validade: 24 meses após a data de
fabricação impressa na embalagem.' -> Texto limpo para análise: '789893734577524'
2025-09-20 01:36:21,538 - app.services.vision_service - INFO - GTIN validado com sucesso: 7898937345775
2025-09-20 01:36:21,538 - main - INFO - Dados extraídos - GTIN: 7898937345775, Texto: 91 chars, Logos: [], Sucesso: True, Tempo: 3.02s
2025-09-20 01:36:21,538 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7898937345775). Iniciando validação.
2025-09-20 01:36:21,539 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7898937345775
2025-09-20 01:42:06,379 - main - INFO - Encerrando aplicação CadVision API
2025-09-20 01:42:08,855 - main - INFO - Iniciando aplicação CadVision API
2025-09-20 01:42:08,857 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-20 01:42:08,858 - main - INFO - Banco de dados inicializado
2025-09-20 01:42:17,824 - main - INFO - Encerrando aplicação CadVision API
2025-09-20 01:42:20,039 - main - INFO - Iniciando aplicação CadVision API
2025-09-20 01:42:20,042 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-20 01:42:20,042 - main - INFO - Banco de dados inicializado
2025-09-20 01:42:56,680 - main - INFO - Encerrando aplicação CadVision API
2025-09-20 01:42:59,165 - main - INFO - Iniciando aplicação CadVision API
2025-09-20 01:42:59,167 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-20 01:42:59,168 - main - INFO - Banco de dados inicializado
2025-09-20 01:44:20,412 - main - ERROR - Erro ao buscar produtos: no such table: products
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 290, in get_products
    total_result = db.execute(count_query, params).fetchone()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such table: products
2025-09-20 01:44:20,423 - main - ERROR - Erro ao gerar resumo do dashboard: no such table: products
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 556, in get_dashboard_summary
    kpis = get_dashboard_kpis(db)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\app\database.py", line 424, in get_dashboard_kpis
    cur.execute("SELECT COUNT(*) as total FROM products")
sqlite3.OperationalError: no such table: products
2025-09-20 01:44:35,183 - app.database - ERROR - Erro ao buscar produto por hash de imagem: no such table: products
2025-09-20 01:44:35,233 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-20 01:44:39,732 - app.services.vision_service - INFO - Vision API: Texto extraído (87 chars), Logos: 0, Labels: 8
2025-09-20 01:44:39,752 - app.services.vision_service - INFO - GTIN validado com sucesso: 7896022200534
2025-09-20 01:44:39,753 - main - INFO - Dados extraídos - GTIN: 7896022200534, Texto: 87 chars, Logos: [], Sucesso: True, Tempo: 4.57s
2025-09-20 01:44:39,753 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7896022200534). Iniciando validação.
2025-09-20 01:44:39,754 - main - ERROR - Erro interno no processamento: no such table: products
Traceback (most recent call last):
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\main.py", line 190, in identify_image
    product_info = intelligent_text_analysis(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Pedro Diniz\Documents\CadVision\CadVision_app\backend\app\services\product_service.py", line 156, in intelligent_text_analysis
    cursor.execute(
sqlite3.OperationalError: no such table: products
2025-09-20 01:44:45,336 - main - INFO - Encerrando aplicação CadVision API
2025-09-20 01:44:54,950 - main - INFO - Iniciando aplicação CadVision API
2025-09-20 01:44:54,994 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-20 01:44:54,995 - main - INFO - Banco de dados inicializado
2025-09-20 01:45:21,230 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-20 01:45:23,569 - app.services.vision_service - INFO - Vision API: Texto extraído (15 chars), Logos: 0, Labels: 5
2025-09-20 01:45:23,571 - app.services.vision_service - INFO - Texto bruto: '7891340" 365576' -> Texto limpo para análise: '7891340365576'
2025-09-20 01:45:23,571 - app.services.vision_service - INFO - GTIN validado com sucesso: 7891340365576
2025-09-20 01:45:23,573 - main - INFO - Dados extraídos - GTIN: 7891340365576, Texto: 15 chars, Logos: [], Sucesso: True, Tempo: 2.40s
2025-09-20 01:45:23,573 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7891340365576). Iniciando validação.
2025-09-20 01:45:23,573 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7891340365576
2025-09-20 01:46:12,894 - app.services.vision_service - INFO - Imagem aprimorada para OCR.
2025-09-20 01:46:16,616 - app.services.vision_service - INFO - Vision API: Texto extraído (91 chars), Logos: 0, Labels: 1
2025-09-20 01:46:16,617 - app.services.vision_service - INFO - Texto bruto: '7 898937345775
Prazo de Validade: 24 meses após a data de
fabricação impressa na embalagem.' -> Texto limpo para análise: '789893734577524'
2025-09-20 01:46:16,617 - app.services.vision_service - INFO - GTIN validado com sucesso: 7898937345775
2025-09-20 01:46:16,617 - main - INFO - Dados extraídos - GTIN: 7898937345775, Texto: 91 chars, Logos: [], Sucesso: True, Tempo: 3.74s
2025-09-20 01:46:16,618 - app.services.product_service - INFO - Prioridade 1: GTIN detectado (7898937345775). Iniciando validação.
2025-09-20 01:46:16,618 - app.services.product_service - INFO - Consultando API Cosmos para GTIN: 7898937345775
2025-09-20 01:52:18,543 - main - INFO - Encerrando aplicação CadVision API
2025-09-20 01:53:09,954 - main - INFO - Iniciando aplicação CadVision API
2025-09-20 01:53:09,956 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-20 01:53:09,957 - main - INFO - Banco de dados inicializado
2025-09-20 01:53:12,217 - main - INFO - Encerrando aplicação CadVision API
2025-09-20 01:53:14,463 - main - INFO - Iniciando aplicação CadVision API
2025-09-20 01:53:14,466 - app.database - INFO - Banco de dados inicializado com sucesso.
2025-09-20 01:53:14,466 - main - INFO - Banco de dados inicializado
2025-09-20 02:04:17,290 - main - INFO - Encerrando aplicação CadVision API
